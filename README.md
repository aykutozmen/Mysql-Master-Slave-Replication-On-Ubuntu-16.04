# Mysql-Master-Slave-Replication-On-Ubuntu-16.04

**On Master:**
```
# cp /etc/mysql/my.cnf /etc/mysql/my.cnf.before.replication
# vi /etc/mysql/my.cnf
      [mysqld]
      #skip-networking
      #bind-address=127.0.0.1
      bind-address=node1_managemenet_ip
      log-bin=mysql-bin
      server-id=1
      binlog-do-db=DB_Name1_To_Be_Replicated
      binlog-do-db=DB_Name2_To_Be_Replicated
      binlog-do-db=mysql
```

NOTE:	The databases DB_Name1_To_Be_Replicated and DB_Name2_To_Be_Replicated should be created before...

NOTE:	There's no need to avoid replicating performance_schema or information_schema -- they are not real databases with real tables, they are generated by server internals to interact via SQL, but you'll notice from their table definitions that they aren't normal. They can't be altered, modified, dropped, created, updated, inserted into, or deleted from... and they don't cause replication events. The performance_schema does not have to be configured the same on master and slave.
The mysql database, you need to allow to replicate, because the users on the master need to be valid users on the slave -- otherwise, you will encounter potential problems with definitions and execution of views, triggers, stored procedures, stored functions, and events, all of which have "definer" attributes that need the defining users to exist on the slave in many cases.

```
# systemctl restart mysql
# mysql -u root -p
  > GRANT ALL PRIVILEGES ON *.* TO 'slave_user'@'%' IDENTIFIED BY 'slave_user_pass';
  > FLUSH PRIVILEGES;
  > CREATE USER 'backup_user'@'node2_managemenet_ip' IDENTIFIED BY 'backup_user_pass';
  > GRANT SELECT, LOCK TABLES ON DB_Name1_To_Be_Replicated.* TO 'backup_user'@'node2_managemenet_ip';
  > GRANT SELECT, LOCK TABLES ON DB_Name2_To_Be_Replicated.* TO 'backup_user'@'node2_managemenet_ip';
  > GRANT SELECT, LOCK TABLES ON mysql.* TO 'backup_user'@'node2_managemenet_ip';
  > USE DB_Name1_To_Be_Replicated;
  > FLUSH TABLES WITH READ LOCK;
  > SHOW MASTER STATUS;
  
+------------------+----------+--------------------------------------------------------------+------------------+
| File             | Position | Binlog_Do_DB                                                 | Binlog_Ignore_DB |
+------------------+----------+--------------------------------------------------------------+------------------+
| mysql-bin.000004 |      326 | DB_Name1_To_Be_Replicated, DB_Name2_To_Be_Replicated, mysql  |                  |
+------------------+----------+--------------------------------------------------------------+------------------+
```

**On Slave:**
```
# mysqldump -h node1_managemenet_ip -u backup_user -pbackup_user_pass --databases DB_Name1_To_Be_Replicated DB_Name2_To_Be_Replicated mysql > Backup.sql
# mysql -u root -p
  > CREATE DATABASE DB_Name1_To_Be_Replicated;
  > CREATE DATABASE DB_Name2_To_Be_Replicated;
# mysql -u root -p < Backup.sql
```

**On Master:**
```
# mysql -u root -p
  > UNLOCK TABLES;

```

**On Slave:**
```
# cp /etc/mysql/my.cnf /etc/mysql/my.cnf.before.replication
# vi /etc/mysql/my.cnf
    [mysqld]
    #skip-networking
    #bind-address=127.0.0.1
    bind-address=192.168.1.102
    server-id=2
# systemctl restart mysql
# mysql -u root -p
  > CHANGE MASTER TO MASTER_HOST='node1_managemenet_ip', MASTER_USER='slave_user', MASTER_PASSWORD='slave_user_pass', MASTER_LOG_FILE='mysql-bin.000004', MASTER_LOG_POS=326;
```

**On Both Servers**
```
# systemctl restart mysql
```
